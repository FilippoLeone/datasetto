FROM alfg/nginx-rtmp:latest

# Install wget for health checks
RUN apk add --no-cache wget

# Copy our low-latency nginx configuration
COPY nginx.lowlatency.conf /etc/nginx/nginx.conf.custom

# Test nginx configuration
RUN nginx -c /etc/nginx/nginx.conf.custom -t

# Override the entrypoint to use our config
CMD ["nginx", "-c", "/etc/nginx/nginx.conf.custom", "-g", "daemon off;"]
