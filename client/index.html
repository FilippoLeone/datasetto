<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <script src="/env-config.js"></script>
  <title>Datasetto</title>
</head>

<body>
  <div id="app" class="app-shell flex h-screen w-screen overflow-hidden">
    <!-- Left Sidebar: Channels + User Area -->
    <aside class="sidebar flex flex-col w-[260px] bg-bg-sidebar flex-shrink-0 overflow-hidden border-r border-white/5"
      role="navigation" aria-label="Server navigation">
      <!-- Mobile Close Button (floating) -->
      <button id="mobile-sidebar-close" class="mobile-sidebar-close-btn absolute top-3 right-3 z-50 md:hidden" type="button"
        aria-label="Close navigation">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>

      <!-- Channels Section -->
      <div class="sidebar-scroller flex-1 overflow-y-auto overflow-x-hidden pt-3 pb-2 px-2 custom-scrollbar">
        
        <!-- Text Channels -->
        <div class="channel-folder" data-folder="text">
          <button class="channel-folder-header" type="button" aria-expanded="true">
            <svg class="folder-chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
            <svg class="folder-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <span class="folder-label">Text Channels</span>
            <button id="create-text-channel" class="folder-add-btn" title="Create Text Channel" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </button>
          <div class="channel-folder-content" id="text-channels"></div>
        </div>

        <!-- Voice Channels -->
        <div class="channel-folder" data-folder="voice">
          <button class="channel-folder-header" type="button" aria-expanded="true">
            <svg class="folder-chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
            <svg class="folder-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
              <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
            <span class="folder-label">Voice Channels</span>
            <button id="create-voice-channel" class="folder-add-btn" title="Create Voice Channel" type="button">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </button>
          <div class="channel-folder-content" id="channelsList"></div>
        </div>

        <!-- Minigames -->
        <div class="channel-folder" data-folder="minigames">
          <button class="channel-folder-header" type="button" aria-expanded="true">
            <svg class="folder-chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
            <svg class="folder-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="6" width="20" height="12" rx="2"/>
              <circle cx="8" cy="12" r="2"/>
              <path d="M15 9v6"/>
              <path d="M18 9v6"/>
            </svg>
            <span class="folder-label">Minigames</span>
            <span class="folder-badge">Beta</span>
          </button>
          <div class="channel-folder-content" id="minigame-launchers">
            <button id="minigame-open" type="button" class="channel-item">
              <svg class="channel-icon text-brand-primary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <polygon points="10 8 16 12 10 16 10 8"/>
              </svg>
              <span class="channel-name">Slither Arena</span>
            </button>
          </div>
        </div>
      </div>

      <!-- User Area (Bottom) -->
      <div class="mt-auto flex-shrink-0">
        <!-- Voice Status (when connected) -->
        <div id="voice-status-panel" class="p-3 border-t border-black/30 bg-black/20 hidden">
          <div class="flex items-center gap-2 text-xs font-bold text-success mb-2 uppercase tracking-wide">
            <span class="text-lg voice-pulse flex-shrink-0">üîä</span>
            <div class="flex flex-col gap-0.5 overflow-hidden flex-1">
              <span id="connected-voice-channel">Voice Channel</span>
              <span id="watching-stream-indicator"
                class="text-[10px] font-medium text-brand normal-case tracking-normal opacity-90 whitespace-nowrap overflow-hidden text-ellipsis hidden">üì∫
                Watching stream</span>
            </div>
            <span id="voice-quality-indicator" class="quality-unknown flex-shrink-0" 
                  aria-label="Voice connection quality" role="status">...</span>
          </div>
          <div class="voice-toggle-group flex gap-2 flex-wrap">
            <button id="mute" class="voice-toggle-btn" aria-label="Toggle microphone" title="Mute microphone">
              <span class="voice-toggle-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/>
                  <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                  <line x1="12" y1="19" x2="12" y2="22"/>
                </svg>
              </span>
              <span class="voice-toggle-label">Mic</span>
            </button>
            <button id="deafen" class="voice-toggle-btn" aria-label="Toggle output mute" title="Deafen audio">
              <span class="voice-toggle-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"/>
                </svg>
              </span>
              <span class="voice-toggle-label">Audio</span>
            </button>
            <button id="mute-output-combo" class="voice-toggle-btn" aria-label="Toggle mic and output"
              title="Mute all" aria-pressed="false">
              <span class="voice-toggle-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="2" y1="2" x2="22" y2="22"/>
                  <path d="M18.89 13.23A7.12 7.12 0 0 0 19 12v-2"/>
                  <path d="M5 10v2a7 7 0 0 0 12 5"/>
                  <path d="M15 9.34V5a3 3 0 0 0-5.68-1.33"/>
                  <path d="M9 9v3a3 3 0 0 0 5.12 2.12"/>
                  <line x1="12" y1="19" x2="12" y2="22"/>
                </svg>
              </span>
              <span class="voice-toggle-label">All</span>
            </button>
            <!-- Video Controls -->
            <button id="toggle-camera" class="voice-toggle-btn" aria-label="Toggle camera" title="Toggle camera" aria-pressed="false">
              <span class="voice-toggle-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="m22 8-6 4 6 4V8Z"/>
                  <rect width="14" height="12" x="2" y="6" rx="2" ry="2"/>
                </svg>
              </span>
              <span class="voice-toggle-label">Cam</span>
            </button>
            <button id="toggle-screenshare" class="voice-toggle-btn" aria-label="Share screen" title="Share screen" aria-pressed="false">
              <span class="voice-toggle-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect width="20" height="14" x="2" y="3" rx="2"/>
                  <line x1="8" x2="16" y1="21" y2="21"/>
                  <line x1="12" x2="12" y1="17" y2="21"/>
                </svg>
              </span>
              <span class="voice-toggle-label">Screen</span>
            </button>
          </div>
        </div>

        <!-- Voice Users Panel (Discord-like) -->
        <div id="voice-users-panel"
          class="voice-users-panel bg-black/20 border-t border-black/30 max-h-[280px] overflow-y-auto flex-shrink-0 custom-scrollbar hidden">
          <div class="voice-panel-header">
            <div class="voice-panel-info">
              <svg class="voice-panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
              <span class="voice-panel-count"><span id="voice-user-count">0</span></span>
            </div>
            <div class="voice-panel-status">
              <div class="voice-panel-timer-group" id="voice-timer-group">
                <svg class="voice-panel-timer-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
                <span class="voice-panel-timer" id="voice-session-timer" aria-live="polite">--:--</span>
              </div>
              <button id="mobile-voice-close" class="voice-panel-close-btn" type="button" aria-label="Close voice panel">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="py-2" id="voice-users-list">
            <!-- Dynamic voice users will be inserted here -->
          </div>
        </div>

        <!-- User Profile Bar -->
        <div class="p-3 bg-black/20 border-t border-white/5 flex items-center gap-3 backdrop-blur-md">
          <div
            class="w-10 h-10 rounded-full bg-gradient-to-br from-brand-primary to-brand-secondary flex items-center justify-center text-white font-bold text-base flex-shrink-0 shadow-lg ring-1 ring-white/10"
            id="user-avatar" aria-label="User avatar" role="img"></div>
          <div class="flex-1 min-w-0">
            <div class="text-sm font-semibold text-text-normal truncate" id="accName">User</div>
            <div class="text-xs text-text-muted truncate" id="user-status-text">Online</div>
          </div>
          <div class="flex items-center gap-1 relative">
            <button id="superuser-menu-btn"
              class="hidden w-8 h-8 rounded-md flex items-center justify-center text-lg transition-all hover:bg-white/10 hover:text-brand-primary hover:scale-105 active:scale-95"
              aria-label="Superuser actions" title="Superuser Actions" aria-haspopup="true" aria-expanded="false"
              type="button">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
            </button>
            <div id="superuser-menu"
              class="absolute bottom-full right-0 mb-2 bg-bg-tertiary border border-white/10 rounded-xl p-2 min-w-[180px] shadow-2xl z-dropdown hidden backdrop-blur-xl"
              role="menu" aria-hidden="true">
              <button id="superuser-manage-users"
                class="w-full px-3 py-2 rounded-lg cursor-pointer text-text-normal flex items-center gap-3 transition-fast hover:bg-white/5 text-left text-sm font-medium"
                role="menuitem" type="button">Manage Users</button>
              <button id="superuser-manage-channels"
                class="w-full px-3 py-2 rounded-lg cursor-pointer text-text-normal flex items-center gap-3 transition-fast hover:bg-white/5 text-left text-sm font-medium"
                role="menuitem" type="button">Manage Channels</button>
            </div>
<a href="/downloads.html" id="downloads-btn"
              class="w-8 h-8 rounded-md flex items-center justify-center text-lg transition-all hover:bg-white/10 hover:text-brand-primary hover:scale-105 active:scale-95 native-app-hidden"
              aria-label="Download apps" title="Download Apps">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
            </a>
            <button id="user-settings-btn"
              class="w-8 h-8 rounded-md flex items-center justify-center text-lg transition-all hover:bg-white/10 hover:text-brand-primary hover:scale-105 active:scale-95"
              aria-label="User settings" title="User Settings">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main Content: Chat -->
    <main class="main-content chat-content flex-1 flex flex-col overflow-hidden" role="main">
      <h1 id="current-channel-name" class="hidden">general</h1>

      <section id="voice-call-stage"
        class="voice-call-stage hidden w-full max-w-6xl self-center flex flex-col gap-6 px-6 py-8 lg:px-10">
        <div id="voiceVideoToolbar" class="voice-video-toolbar hidden">
          <span class="voice-video-toolbar__label">Live video</span>
          <div class="voice-video-toolbar__actions">
            <button id="voice-popout-video" type="button"
              class="voice-video-toolbar__btn" aria-label="Pop out active video" title="Pop out active video">
              <span class="icon" aria-hidden="true">‚á±</span>
              <span class="label">Pop out</span>
            </button>
          </div>
        </div>
        <!-- Video Grid for camera/screen share -->
        <div id="video-call-grid" class="video-call-grid hidden" role="region" aria-label="Video call participants">
          <!-- Local video preview -->
          <div id="local-video-container" class="video-tile local-video hidden" data-user-id="local">
            <video id="local-video" class="video-element" autoplay muted playsinline></video>
            <div class="video-tile-overlay">
              <span class="video-tile-name">You</span>
              <span class="video-tile-badge camera-badge hidden">üìπ</span>
              <span class="video-tile-badge screen-badge hidden">üñ•Ô∏è</span>
            </div>
          </div>
          <!-- Remote videos will be added dynamically -->
        </div>
        <div id="voiceGallery" class="voice-gallery hidden" role="list" aria-live="polite"
          aria-label="Voice channel participants"></div>
      </section>

      <section id="minigame-stage"
        class="minigame-stage hidden w-full max-w-5xl self-center flex flex-col gap-4 px-4 py-6 lg:px-8"
        aria-label="Game Arena">
        <div class="minigame-stage-toolbar flex w-full items-center justify-between rounded-xl border border-white/5 bg-gradient-to-r from-bg-secondary/60 to-black/40 px-4 py-3 shadow-xl">
          <div class="flex items-center gap-3">
            <div class="flex items-center gap-2 text-xs font-semibold uppercase tracking-wider text-brand-primary">
              <span class="inline-flex h-2 w-2 animate-pulse rounded-full bg-brand-primary"></span>
              Game Arena
            </div>
          </div>
          <button id="minigame-close"
            class="rounded-full border border-white/20 bg-transparent px-4 py-1.5 text-2xs font-semibold uppercase tracking-wider text-text-muted transition-fast hover:border-white/40 hover:text-white"
            type="button">Back</button>
        </div>

        <div id="minigame-container"
          class="minigame-screen hidden rounded-2xl border border-white/10 bg-black/30 p-4 lg:p-6">
          <div class="flex flex-col gap-4">
            <!-- Game Header Bar -->
            <header class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
              <div class="flex items-center gap-4">
                <!-- Game Selector Dropdown -->
                <div class="relative" id="game-selector-wrapper">
                  <button id="game-selector-btn" type="button"
                    class="flex items-center gap-2 rounded-lg border border-white/10 bg-black/40 px-3 py-2 text-sm font-semibold text-white transition-fast hover:border-white/20 hover:bg-black/60">
                    <span id="game-selector-icon" class="text-lg">üéÆ</span>
                    <span id="game-selector-label">Select Game</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-1 opacity-60"><path d="m6 9 6 6 6-6"/></svg>
                  </button>
                  <div id="game-selector-dropdown" class="absolute left-0 top-full z-dropdown mt-2 hidden min-w-[200px] rounded-xl border border-white/10 bg-bg-tertiary/95 p-2 shadow-2xl backdrop-blur-xl">
                    <button type="button" data-game="slither" class="game-option flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-fast hover:bg-white/10">
                      <span class="text-xl">üêç</span>
                      <div class="flex flex-col">
                        <span class="text-sm font-semibold text-white">Slither Arena</span>
                        <span class="text-xs text-text-muted">Neon swarm royale</span>
                      </div>
                    </button>
                    <button type="button" data-game="pacman" class="game-option flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-left transition-fast hover:bg-white/10">
                      <span class="text-xl">üëª</span>
                      <div class="flex flex-col">
                        <span class="text-sm font-semibold text-white">Pacman Chase</span>
                        <span class="text-xs text-text-muted">Retro maze chaos</span>
                      </div>
                    </button>
                  </div>
                </div>
                <!-- Status -->
                <div class="flex flex-col gap-0.5">
                  <p id="minigame-status" class="text-xs leading-tight text-text-muted">Loading...</p>
                </div>
              </div>
              <!-- Actions -->
              <div class="flex flex-wrap items-center gap-2 text-2xs font-semibold uppercase">
                <button id="minigame-start"
                  class="rounded-md bg-brand-primary px-4 py-2 text-white transition-fast hover:bg-brand-hover"
                  type="button">Start Game</button>
                <button id="minigame-join"
                  class="rounded-md bg-brand-primary px-4 py-2 text-white transition-fast hover:bg-brand-hover"
                  type="button">Join</button>
                <button id="minigame-leave"
                  class="hidden rounded-md bg-bg-floating px-4 py-2 transition-fast hover:bg-brand-primary hover:text-white"
                  type="button">Leave</button>
                <button id="minigame-end"
                  class="hidden rounded-md bg-danger/10 px-4 py-2 text-danger transition-fast hover:bg-danger hover:text-white"
                  type="button">End</button>
              </div>
            </header>

            <!-- Scores Bar (Horizontal) -->
            <div id="minigame-scores-bar" class="flex flex-wrap items-center gap-2 rounded-lg border border-white/5 bg-black/20 px-3 py-2">
              <span class="text-2xs font-semibold uppercase tracking-widest text-text-muted mr-2">Squad:</span>
              <ul id="minigame-scores" class="flex flex-wrap items-center gap-2 text-xs"></ul>
            </div>

            <!-- Game Canvas -->
            <div class="flex items-center justify-center">
              <div class="w-full" style="max-width: min(100%, 800px);">
                <canvas id="minigame-canvas"
                  class="w-full aspect-[4/3] rounded-xl border border-white/10 bg-black/60" width="800"
                  height="600"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div id="streamLayout" class="stream-layout" data-mode="text">
        <!-- Stream Player Column -->
        <section id="streamPlayerColumn" class="stream-player-column hidden">
          <!-- Inline Video Container (for stream channels - Theater Mode) -->
          <div id="inlineVideoContainer" class="inline-video-container flex-shrink-0 bg-black relative hidden">
            <div class="inline-video-header absolute top-0 left-0 right-0 p-4 flex items-center gap-4 bg-gradient-to-b from-black/70 to-transparent z-10">
              <button id="theaterModeToggle"
                class="px-4 py-2 bg-bg-tertiary/90 backdrop-blur-sm rounded-md flex items-center gap-2 font-semibold transition-fast hover:bg-bg-floating hover:shadow-md"
                aria-label="Back to channels" title="Back to Channels">
                <span>‚¨ÖÔ∏è</span>
                <span>Back</span>
              </button>
              <div class="text-lg font-bold text-white" id="mobileStreamTitle" aria-live="polite">Live Stream</div>
              <button id="toggle-video-popout"
                class="ml-auto w-9 h-9 rounded-full bg-bg-tertiary/85 backdrop-blur-sm flex items-center justify-center text-white text-lg shadow-md transition-fast hover:bg-bg-floating"
                aria-label="Pop out video" title="Pop out video">‚á±</button>
            </div>

            <div class="inline-video-stage relative w-full aspect-video bg-black">
              <video id="inlineVideo" class="w-full h-full" aria-label="Video player" autoplay muted playsinline webkit-playsinline></video>
              <div id="inlinePlayerOverlay" class="video-player-overlay" aria-live="polite">
                <div class="overlay-content">
                  <div class="overlay-spinner w-12 h-12 border-4 border-brand-primary border-t-transparent rounded-full animate-spin" aria-hidden="true"></div>
                  <p class="message">No stream</p>
                </div>
              </div>
            </div>

            <div class="video-controls-bar" id="videoControlsBar">
              <div class="video-controls-left">
                <button id="playPauseBtn" class="control-btn" aria-label="Play/Pause" title="Play/Pause">
                  <span class="icon">‚ñ∂Ô∏è</span>
                </button>
                <div class="volume-control">
                  <button id="volumeBtn" class="control-btn" aria-label="Mute/Unmute" title="Mute/Unmute">
                    <span class="icon" id="volumeIcon">üîä</span>
                  </button>
                  <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="0" aria-label="Volume" />
                </div>
                <span class="live-indicator-badge hidden inline-flex items-center" aria-live="polite" aria-hidden="true">
                  <span class="status-dot" aria-hidden="true"></span>
                  <span class="status-text">OFFLINE</span>
                </span>
              </div>
              <div class="video-controls-right">
                <button id="fullscreenBtn" class="control-btn" aria-label="Fullscreen" title="Fullscreen">
                  <span class="icon">üóñ</span>
                </button>
              </div>
            </div>
          </div>

          <div id="screenshareControls" class="screenshare-controls hidden" aria-live="polite">
            <div class="screenshare-status" id="screenshareStatusLabel">Select a screenshare channel to get started.</div>
            <div class="screenshare-actions">
              <button id="screenshareStartBtn" type="button" class="screenshare-btn primary">Start Screenshare</button>
              <button id="screenshareStopBtn" type="button" class="screenshare-btn danger hidden">Stop Sharing</button>
            </div>
          </div>
        </section>

        <!-- Stream Chat Column -->
        <aside id="streamChatDock" class="stream-chat-dock hidden" aria-hidden="true" role="complementary" aria-label="Channel chat">
          <header class="stream-chat-header">
            <div class="stream-chat-title text-channel-title" id="streamChatTitle">#general</div>
            <div class="stream-chat-status" id="streamChatStatus" aria-live="polite">Chat docked</div>
          </header>

          <!-- Chat Messages -->
          <div id="msgs" class="chat-log flex-1 overflow-y-auto overflow-x-hidden custom-scrollbar" role="log" aria-live="polite" aria-label="Chat messages">
            <!-- Messages will be dynamically inserted here -->
          </div>

          <!-- Chat Input -->
          <div id="chat-input-container" class="chat-input-container flex-shrink-0 relative">
            <form id="chatForm" class="flex items-center gap-3" aria-label="Send message">
              <button type="button" id="emojiPickerBtn" class="text-2xl flex-shrink-0 hover:scale-110 transition-fast text-text-muted hover:text-text-normal"
                aria-label="Add emoji" aria-haspopup="dialog" aria-controls="emojiPicker" aria-expanded="false" title="Add Emoji">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></svg>
              </button>
              <input type="text" id="chatInput" class="flex-1 bg-transparent border-none text-text-normal text-base outline-none"
                placeholder="Message #general" aria-label="Message input" autocomplete="off" />
              <button type="submit" class="text-2xl flex-shrink-0 hover:scale-110 transition-fast text-brand-primary hover:text-brand-hover"
                aria-label="Send message" title="Send">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
              </button>
            </form>
            <!-- Emoji Picker Popup -->
            <div id="emojiPicker" class="emoji-picker hidden" role="dialog" aria-hidden="true">
              <div class="px-4 py-3 font-bold text-text-normal border-b border-white/10">Emojis</div>
              <div id="emojiGrid" class="emoji-grid grid grid-cols-8 gap-2 p-3 custom-scrollbar">
                <!-- Emojis will be populated here -->
              </div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <!-- Right Sidebar: Members List -->
    <aside class="members-panel w-60 bg-bg-secondary flex-shrink-0 overflow-hidden border-l border-black/30 hidden"
      role="complementary" aria-label="Members list">
      <div class="px-4 py-3 text-2xs font-bold uppercase text-text-muted tracking-wider border-b border-black/30">
        Members ‚Äî <span id="member-count">0</span>
      </div>
      <div class="members-list p-2 overflow-y-auto custom-scrollbar" id="presenceList">
        <!-- Dynamic members will be inserted here -->
      </div>
    </aside>

    <!-- Video Popout -->
    <div id="video-popout"
      class="video-popout fixed bottom-4 right-4 w-96 bg-bg-tertiary rounded-lg shadow-lg overflow-hidden z-modal hidden"
      role="region" aria-label="Video player">
      <div class="px-4 py-3 bg-bg-secondary flex items-center justify-between cursor-move" id="video-popout-header">
        <span id="video-popout-title" class="font-bold text-text-normal">Stream</span>
        <div class="flex gap-2">
          <button id="popinVideo"
            class="w-8 h-8 rounded flex items-center justify-center transition-fast hover:bg-bg-floating text-text-muted hover:text-text-normal"
            aria-label="Theater mode" title="Theater Mode">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline></svg>
          </button>
          <button id="minimize-video"
            class="w-8 h-8 rounded flex items-center justify-center transition-fast hover:bg-bg-floating text-text-muted hover:text-text-normal"
            aria-label="Minimize video" title="Minimize">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          </button>
          <button id="close-video"
            class="w-8 h-8 rounded flex items-center justify-center transition-fast hover:bg-danger hover:text-white text-text-muted"
            aria-label="Close video" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          </button>
        </div>
      </div>
      <div id="video-popout-stage" class="relative aspect-video bg-black">
        <video id="video" class="w-full h-full" aria-label="Video player" autoplay muted playsinline
          webkit-playsinline></video>
        <div id="playerOverlay" class="video-player-overlay" aria-live="polite">
          <div class="overlay-content">
            <div
              class="overlay-spinner w-12 h-12 border-4 border-brand-primary border-t-transparent rounded-full animate-spin"
              aria-hidden="true"></div>
            <p class="message">No stream</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Stream Guide Modal -->
    <div id="streamInfoModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="stream-info-title">
      <div class="modal-card stream-guide-card">
        <div class="modal-header stream-guide-header">
          <div>
            <p class="stream-guide-eyebrow">Creator tools</p>
            <h3 id="stream-info-title">üì∫ How to Stream</h3>
            <p class="stream-guide-subtitle">Connect OBS (or any RTMP encoder) to Datasetto and go live in seconds. Scroll for the full checklist.</p>
          </div>
          <button id="streamInfoCancel" aria-label="Close">‚úï</button>
        </div>
        <div class="modal-body stream-guide-body modal-body-scrollable custom-scrollbar">
          <section class="stream-guide-panel stream-guide-values">
            <div class="stream-guide-value-card">
              <p class="stream-guide-label">Server URL</p>
              <div class="stream-guide-value">
                <code id="streamServerUrl">rtmp://datasetto.com/live</code>
                <button class="copy-btn"
                  onclick="navigator.clipboard.writeText(document.getElementById('streamServerUrl').textContent)">Copy</button>
              </div>
            </div>
            <div class="stream-guide-value-card">
              <p class="stream-guide-label">Stream Key</p>
              <div class="stream-guide-value">
                <code id="streamKeyDisplay">Tap üîë to fetch key</code>
                <button class="copy-btn"
                  onclick="navigator.clipboard.writeText(document.getElementById('streamKeyDisplay').textContent)">Copy</button>
              </div>
            </div>
          </section>

          <section class="stream-guide-panel">
            <h4>üìù Fast setup steps</h4>
            <ol class="stream-guide-steps">
              <li>Open OBS Studio (or your preferred RTMP encoder).</li>
              <li>Go to <strong>Settings ‚Üí Stream</strong> and choose <strong>Custom</strong> service.</li>
              <li>Paste the <strong>Server URL</strong> above.</li>
              <li>Copy the <strong>FULL Stream Key</strong> (everything after the <code>+</code> is required) and paste it.</li>
              <li>Click <strong>OK</strong> to save, then hit <strong>Start Streaming</strong>.</li>
              <li>Your stream appears in the selected channel within 3‚Äì10 seconds.</li>
            </ol>
          </section>

          <section class="stream-guide-panel">
            <h4>‚öôÔ∏è Recommended OBS settings</h4>
            <ul class="stream-guide-tips">
              <li><strong>Encoder:</strong> x264 or NVENC/AMF if available.</li>
              <li><strong>Bitrate:</strong> 2500‚Äì4000 Kbps for 1080p60.</li>
              <li><strong>Keyframe interval:</strong> 2 seconds.</li>
              <li><strong>Preset:</strong> Veryfast (x264) or Quality (NVENC).</li>
              <li><strong>Profile:</strong> High, CBR rate control.</li>
            </ul>
          </section>

          <section class="stream-guide-panel stream-guide-alert">
            <div class="stream-guide-alert-icon" aria-hidden="true">‚ö†Ô∏è</div>
            <div>
              <h4>Security check</h4>
              <p>Use the entire key shown above (e.g. <code>main-stream+ABC123XYZ</code>). Using only <span id="streamChannelName">Select a stream channel</span> will fail‚Äîthe token after the <code>+</code> keeps your stream private.</p>
            </div>
          </section>
        </div>
        <div class="modal-footer stream-guide-footer">
          <p class="stream-guide-footer-note">Need a key? Click the üîë icon next to a stream channel.</p>
          <button id="streamInfoClose" class="button-primary">Start streaming</button>
        </div>
      </div>
    </div>

    <!-- Create Channel Modal -->
    <div id="createChannelModal" class="modal hidden" role="dialog"
      aria-modal="true" aria-labelledby="create-channel-title">
      <div class="modal-card">
        <div class="modal-header">
          <h3 id="create-channel-title">Create Channel</h3>
          <button id="createChannelCancel" class="modal-close-btn" aria-label="Close">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="newChannelName">Channel Name</label>
            <input type="text" id="newChannelName" class="form-input"
              placeholder="e.g., general, lobby, main-stream" aria-label="Channel name" maxlength="32" />
            <span class="form-hint">Letters, numbers, hyphens only</span>
          </div>

          <input type="hidden" id="newChannelType" value="text" />

          <div id="createChannelError" class="form-error"></div>
        </div>
        <div class="modal-footer">
          <button id="createChannelBtn" class="button-primary">Create Channel</button>
        </div>
      </div>
    </div>

    <!-- User Settings Modal (Profile) -->
    <div id="regModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settings-modal-title">
      <div class="modal-card">
        <div class="modal-header">
          <h3 id="settings-modal-title">User Settings</h3>
          <button id="regCancel" aria-label="Close settings">‚úï</button>
        </div>
        <p id="settings-modal-subtitle" class="modal-subtitle hidden px-6 -mt-2 mb-4 text-text-muted text-sm"></p>
        <div class="modal-body modal-body-scrollable">
          <div class="modal-tabs auth-mode-tabs" role="tablist" aria-label="Authentication modes">
            <button id="authTabLogin" class="modal-tab" type="button" role="tab" aria-selected="false">
              <span class="modal-tab-icon" aria-hidden="true">üîê</span>
              <span class="modal-tab-text">
                <span class="modal-tab-title">Log In</span>
                <span class="modal-tab-subtitle">Use an existing account</span>
              </span>
            </button>
            <button id="authTabRegister" class="modal-tab" type="button" role="tab" aria-selected="false">
              <span class="modal-tab-icon" aria-hidden="true">‚ú®</span>
              <span class="modal-tab-text">
                <span class="modal-tab-title">Create Account</span>
                <span class="modal-tab-subtitle">Start fresh with a new profile</span>
              </span>
            </button>
            <button id="authTabProfile" class="modal-tab" type="button" role="tab" aria-selected="false">
              <span class="modal-tab-icon" aria-hidden="true">üë§</span>
              <span class="modal-tab-text">
                <span class="modal-tab-title">Profile</span>
                <span class="modal-tab-subtitle">Manage your details</span>
              </span>
            </button>
          </div>
          <p class="auth-mode-hint" id="auth-mode-hint">Choose how you‚Äôd like to continue.</p>

          <section id="authLoginSection" class="auth-section hidden flex flex-col gap-5 mb-6">
            <div class="form-group">
              <label for="authLoginEmail">Email</label>
              <input type="email" id="authLoginEmail" placeholder="name@example.com" aria-label="Email address"
                maxlength="254" autocomplete="email" />
            </div>

            <div class="form-group">
              <label for="authLoginPassword">Password</label>
              <input type="password" id="authLoginPassword" placeholder="Enter your password" aria-label="Password"
                autocomplete="current-password" />
            </div>
          </section>

          <section id="authRegisterSection" class="auth-section flex flex-col gap-5 mb-6">
            <div class="form-group">
              <label for="authRegisterEmail">Email</label>
              <input type="email" id="authRegisterEmail" placeholder="name@example.com" aria-label="Email address"
                maxlength="254" autocomplete="email" />
              <span class="form-hint">We‚Äôll use this for login. No marketing emails ever.</span>
            </div>

            <div class="form-group">
              <label for="authRegisterPassword">Password</label>
              <input type="password" id="authRegisterPassword" placeholder="Choose a password" aria-label="Password"
                autocomplete="new-password" />
              <span class="form-hint">At least 8 characters.</span>
              <div class="password-strength" id="passwordStrength" aria-live="polite">
                <div class="password-strength-bar" role="presentation">
                  <div class="password-strength-fill" id="passwordStrengthFill"></div>
                </div>
                <span class="password-strength-label" id="passwordStrengthLabel">Start typing to check strength</span>
              </div>
            </div>

            <div class="form-group">
              <label for="authRegisterConfirm">Confirm Password</label>
              <input type="password" id="authRegisterConfirm" placeholder="Re-enter your password"
                aria-label="Confirm password" autocomplete="new-password" />
            </div>

            <div class="form-group">
              <label for="authRegisterDisplayName">Display Name</label>
              <input type="text" id="authRegisterDisplayName" placeholder="Pick a display name"
                aria-label="Display name" maxlength="50" />
              <span class="form-hint">Shown in chat, voice, and presence lists.</span>
            </div>
          </section>

          <section id="authProfileSection" class="auth-section hidden flex flex-col gap-5 mb-6">
            <div class="form-group">
              <label for="authProfileAccountEmail">Account Email</label>
              <input type="email" id="authProfileAccountEmail" aria-label="Account email" readonly disabled />
              <span class="form-hint">Contact support to change your login email.</span>
            </div>

            <div class="form-group">
              <label for="authProfileDisplayName">Display Name</label>
              <input type="text" id="authProfileDisplayName" placeholder="Display name" aria-label="Display name"
                maxlength="50" />
            </div>

            <div class="form-group">
              <label for="authProfileContactEmail">Backup Email (optional)</label>
              <input type="email" id="authProfileContactEmail" placeholder="name@example.com" aria-label="Backup email"
                maxlength="254" autocomplete="email" />
            </div>

            <div class="form-group">
              <label for="authProfileBio">Bio</label>
              <textarea id="authProfileBio" placeholder="Tell others about yourself" aria-label="User bio"
                maxlength="500"></textarea>
            </div>

            <p class="mt-6 mb-3 text-[0.7rem] font-semibold tracking-[0.12em] uppercase text-text-muted">Change Password
            </p>

            <div class="form-group">
              <label for="authProfileCurrentPassword">Current Password</label>
              <input type="password" id="authProfileCurrentPassword" placeholder="Enter current password"
                aria-label="Current password" autocomplete="current-password" />
              <span class="form-hint">Required to set a new password.</span>
            </div>

            <div class="form-group">
              <label for="authProfileNewPassword">New Password</label>
              <input type="password" id="authProfileNewPassword" placeholder="Choose a new password"
                aria-label="New password" autocomplete="new-password" />
            </div>

            <div class="form-group">
              <label for="authProfileNewPasswordConfirm">Confirm New Password</label>
              <input type="password" id="authProfileNewPasswordConfirm" placeholder="Confirm new password"
                aria-label="Confirm new password" autocomplete="new-password" />
            </div>
          </section>

          <div id="regError" class="form-error" aria-live="polite"></div>
        </div>
        <div class="modal-footer">
          <button id="logoutBtn" class="button-secondary hidden" type="button">Log Out</button>
          <button id="registerBtn" class="button-primary" type="button">Create Account</button>
        </div>
      </div>
    </div>

    <!-- Audio Settings Modal -->
    <div id="audioSettingsModal" class="modal hidden" role="dialog" aria-modal="true"
      aria-labelledby="audio-settings-title">
      <div class="modal-card">
        <div class="modal-header">
          <h3 id="audio-settings-title">‚öôÔ∏è Audio & Voice Settings</h3>
          <button id="audioSettingsCancel" aria-label="Close audio settings">‚úï</button>
        </div>
        <div class="modal-body modal-body-scrollable">
          <!-- Device Selection -->
          <div class="settings-section">
            <h4 class="settings-section-title">üé§ Devices</h4>

            <div class="form-group">
              <label for="micSelect">Microphone</label>
              <select id="micSelect" aria-label="Select microphone">
                <option>Loading devices...</option>
              </select>
            </div>

            <div class="form-group">
              <label for="spkSelect">Speakers/Output</label>
              <select id="spkSelect" aria-label="Select speakers">
                <option>Loading devices...</option>
              </select>
            </div>

            <div class="form-group">
              <label>Microphone Level</label>
              <div class="level-meter">
                <div id="micLevel" class="level-bar"></div>
              </div>
              <button id="testMicBtn" class="button-secondary" style="margin-top: 8px;" data-testing="false">Test
                Microphone</button>
            </div>
          </div>

          <!-- Voice Processing -->
          <div class="settings-section">
            <h4 class="settings-section-title">üîä Voice Processing</h4>

            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" id="echoCancel" checked />
                <span>Echo Cancellation</span>
              </label>
              <span class="form-hint">Removes echo and feedback</span>
            </div>

            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" id="noiseSuppression" checked />
                <span>Noise Suppression</span>
              </label>
              <span class="form-hint">Reduces background noise</span>
            </div>

            <div class="form-group">
              <label for="noiseReducerLevel">Background Filter: <span id="noiseReducerVal">Balanced</span></label>
              <input type="range" id="noiseReducerLevel" min="0" max="1" step="0.05" value="0.35" />
              <span class="form-hint">Higher values clamp more ambient noise but may trim very quiet speech.</span>
            </div>

            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" id="autoGain" checked />
                <span>Auto Gain Control</span>
              </label>
              <span class="form-hint">Automatically adjusts volume</span>
            </div>

            <div class="form-group">
              <label for="voiceQuality">Voice Quality</label>
              <select id="voiceQuality" class="form-input">
                <option value="32000">Low (32kbps) - Mobile</option>
                <option value="64000">Standard (64kbps)</option>
                <option value="96000">High (96kbps)</option>
                <option value="128000" selected>Studio (128kbps)</option>
              </select>
              <span class="form-hint">Higher quality uses more bandwidth</span>
            </div>

            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" id="dtx" checked />
                <span>Discontinuous Transmission (DTX)</span>
              </label>
              <span class="form-hint">Saves bandwidth when silent</span>
            </div>

            <div class="form-group">
              <label for="latencyHint">Audio Latency</label>
              <select id="latencyHint" class="form-input">
                <option value="interactive" selected>Interactive (Lowest)</option>
                <option value="balanced">Balanced</option>
                <option value="playback">Playback (Highest Quality)</option>
              </select>
              <span class="form-hint">Lower latency for real-time chat</span>
            </div>

            <div class="form-group">
              <label for="vadThreshold">Voice Activation Sensitivity: <span id="vadThresholdVal">Medium</span></label>
              <input type="range" id="vadThreshold" min="0.01" max="0.20" step="0.01" value="0.07" />
              <span class="form-hint">Lower = more sensitive (picks up quieter sounds)</span>
            </div>
          </div>

          <!-- Volume Controls -->
          <div class="settings-section">
            <h4 class="settings-section-title">üéöÔ∏è Volume</h4>

            <div class="form-group">
              <label for="micGain">Microphone Gain: <span id="micGainVal">1.0x</span></label>
              <input type="range" id="micGain" min="0.5" max="2.0" step="0.1" value="1.0" />
            </div>

            <div class="form-group">
              <label for="outputVol">Output Volume: <span id="outputVolVal">100%</span></label>
              <input type="range" id="outputVol" min="0" max="1" step="0.05" value="1" />
            </div>
          </div>

          <!-- Push to Talk -->
          <div class="settings-section">
            <h4 class="settings-section-title">üéôÔ∏è Push to Talk</h4>

            <div class="form-group checkbox-group">
              <label>
                <input type="checkbox" id="pttEnable" />
                <span>Enable Push to Talk</span>
              </label>
              <span class="form-hint">Hold key to transmit</span>
            </div>

            <div class="form-group">
              <label for="pttKey">PTT Key</label>
              <div style="display: flex; gap: 8px;">
                <input type="text" id="pttKey" value="Space" readonly placeholder="Press Set Key button" />
                <button id="pttSetKey" class="button-secondary">Set Key</button>
              </div>
              <span class="form-hint">Click Set Key and press the key you want to use</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button id="audioSettingsSave" class="button-primary">Save Settings</button>
        </div>
      </div>
    </div>
    <!-- Mobile Navigation Toolbar -->
    <nav id="mobile-toolbar" class="mobile-toolbar" aria-label="Mobile navigation">
      <button id="mobile-open-channels" class="mobile-toolbar-btn" type="button" aria-label="Open channels">
        <span class="icon" aria-hidden="true">‚ò∞</span>
        <span class="label">Channels</span>
      </button>
      <button id="mobile-open-settings" class="mobile-toolbar-btn" type="button" aria-label="Open settings">
        <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
        <span class="label">Settings</span>
      </button>
      <button id="mobile-open-profile" class="mobile-toolbar-btn" type="button" aria-label="Open profile settings">
        <span class="icon" aria-hidden="true">üë§</span>
        <span class="label">Profile</span>
      </button>
    </nav>
  </div>
  <!-- Superuser Control Modal -->
  <div id="superuserModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="superuser-modal-title">
    <div class="modal-card modal-large superuser-modal-card">
      <div class="modal-header">
        <h3 id="superuser-modal-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: inline-block; vertical-align: -3px; margin-right: 8px; color: #fbbf24;"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>
          Superuser Control Center
        </h3>
        <button id="superuserModalClose" class="modal-close-btn" aria-label="Close superuser controls">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </div>
      <div class="modal-body modal-body-scrollable">
        <div class="modal-tabs" role="tablist" aria-label="Superuser sections">
          <button id="superuserTabUsers" class="modal-tab" role="tab" aria-selected="true">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
            Users
          </button>
          <button id="superuserTabChannels" class="modal-tab" role="tab" aria-selected="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></svg>
            Channels
          </button>
        </div>
        <div class="superuser-panels">
          <section id="superuserUsersPanel" class="superuser-panel active" data-panel="users" role="tabpanel"
            aria-labelledby="superuserTabUsers">
            <div class="superuser-panel-header">
              <p>Review accounts, disable access, or re-enable users.</p>
            </div>
            <div id="superuserUsersList" class="superuser-list" role="table"></div>
          </section>
          <section id="superuserChannelsPanel" class="superuser-panel" data-panel="channels" role="tabpanel"
            aria-labelledby="superuserTabChannels" hidden>
            <div class="superuser-panel-header">
              <p>Manage channels, review usage, and remove unused rooms.</p>
            </div>
            <div id="superuserChannelsList" class="superuser-list" role="table"></div>
          </section>
        </div>
      </div>
    </div>
  </div>


  <script type="module" src="/src/main.ts"></script>
</body>

</html>